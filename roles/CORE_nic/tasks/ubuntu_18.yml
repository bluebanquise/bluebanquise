# Tested on:
#   - Ubuntu 18.04

- name: Install required packages for Ubuntu
  package:
    name: "{{item}}"
    state: present
  with_items:
    - network-manager
    - python-dbus
    - libnm-glib-dev
#  when:
#    - ansible_distribution_version == "18.04"
#    - (ansible_distribution|lower) == "ubuntu"

- name: Solve possible issue (unmanaged)
  file:
    path: /etc/NetworkManager/conf.d/10-globally-managed-devices.conf
    state: touch

- name: Start services
  service:
    name: network-manager
    state: started
    enabled: yes

