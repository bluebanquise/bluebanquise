---

- name: Set defaults for user quotas
  xfs_quota:
   type: user
   mountpoint: "{{ item.mountpoint }}"
   bsoft: "{{ user_quotas_default_soft }}"
   bhard: "{{ user_quotas_default_hard }}"
   state: present
  loop: "{{ quota_filesystem }}"


- name: Set default Quotas Group
  xfs_quota:
   type: group
   mountpoint: "{{ item.mountpoint }}"
   bsoft: "{{ group_quotas_default_soft }}"
   bhard: "{{ group_quotas_default_hard }}"
   state: present
  loop: "{{ quota_filesystem }}"

- name: Set quotas for specific users or groups
  xfs_quota:
   type: "{{ item.type }}"
   name: "{{ item.name }}"
   mountpoint: "{{ item.mountpoint }}"
   bsoft: "{{ item.soft }}"
   bhard: "{{ item.hard }}"
   state: present
  loop: "{{ quotas_spec }}"
